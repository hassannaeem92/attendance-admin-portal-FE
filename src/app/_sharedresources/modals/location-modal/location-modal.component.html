<!-- Trigger Button -->

<!-- Modal -->
<div id="location-modal" class="modal fade" tabindex="-1" aria-labelledby="companyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="companyModalLabel">Location</h5>
          <button type="button" class="btn-close custom-close" data-bs-dismiss="modal" aria-label="Close"></button>
  
        </div>
        <div class="modal-body">
          <div class="card-body">
            <div class="container">
                <form #form="ngForm" (ngSubmit)="form.form.valid && onSubmit(form)">


                    <div class="row gy-4 gx-3">
                        <!-- Organization ID -->
                        <div *ngIf="currentUserRole === 'SuperAdmin'" class="col-12 col-md-5">
                            <label for="OrganizationSelect" class="form-label">Select Company</label>
                            <ng-select id="OrganizationSelect" [(ngModel)]="selectedOrganization" [items]="organizationArray"
                              bindLabel="name" placeholder="Select an Organization" name="organizationSelect" class="dark-mode-select"
                              [multiple]="false" required (change)="onOrganizationChange(selectedOrganization.id)"></ng-select>
                            <div *ngIf="form.submitted && !selectedOrganization" class="text-danger mt-2">
                              {{ requiredText }}
                            </div>
                          </div>
                          <!-- <div *ngIf="currentUserRole === 'SuperAdmin'" class="col-6 col-md-1">
                            <button type="button" class="btn btn-primary mt-4 btn-fill" (click)="createOrganization()">
                              Add
                            </button>
                          </div> -->
              
                     <!-- Client Company -->
                    <div class="col-12 col-md-5">
                        <label for="CompanySelect" class="form-label">Select Client Company</label>
                        <ng-select id="CompanySelect" [(ngModel)]="selectedCompany" [items]="companyArray" bindLabel="name"
                        placeholder="Select a Company" name="CompanySelect" class="dark-mode-select" [multiple]="false"
                       ></ng-select>
                    </div>
                    <!-- <div class="col-6 col-md-1">
                        <button type="button" class="btn btn-primary mt-4 btn-fill" (click)="createCompany()">
                        Add
                        </button>
                    </div> -->
    
                        <!-- Name -->
                        <div class="col-12 col-md-6">
                            <label for="name" class="form-label text-muted">Name</label>
                            <input type="text" class="form-control" id="name" [(ngModel)]="model.Name" name="Name"
                                #name="ngModel" required placeholder="Enter name" />
                            <div *ngIf="form.submitted && name.invalid" class="text-danger mt-1">
                                <small *ngIf="name.errors?.['required']">{{requiredText}}</small>
                            </div>
                        </div>
    
                        <!-- Address -->
                        <div class="col-12 col-md-6">
                            <label for="address" class="form-label text-muted">Address</label>
                            <input type="text" class="form-control" id="address" required #address="ngModel"
                                [(ngModel)]="model.Address" name="Address" placeholder="Enter address" />
                            <div *ngIf="form.submitted && address.invalid" class="text-danger mt-1">
                                <small *ngIf="address.errors?.['required']">{{requiredText}}</small>
                            </div>
                        </div>
    
    
                        <!-- country -->
    
    
                        <div class="col-12 col-md-6">
                            <label for="countrySelect" class="form-label">Select Country</label>
                            <ng-select id="countrySelect" [(ngModel)]="selectedCountry" [items]="countryArray"
                                (change)="onCountryChange()" bindLabel="name" placeholder="Select a country"
                                name="countrySelect" class="dark-mode-select" [multiple]="false" required>
                            </ng-select>
                            <div *ngIf="form.submitted && !selectedCountry" class="text-danger mt-2">
                                {{requiredText}}
                            </div>
                        </div>
    
    
                        <!-- State -->
                        <div class="col-12 col-md-6">
                            <label for="stateSelect" class="form-label">Select State</label>
                            <ng-select id="stateSelect" [(ngModel)]="selectedState" [items]="stateArray"
                                (change)="onStateChange()" bindLabel="name" placeholder="Select a State" name="stateSelect"
                                class="dark-mode-select" [multiple]="false" required>
                            </ng-select>
                            <div *ngIf="form.submitted && !selectedState" class="text-danger mt-2">
                                {{requiredText}}
                            </div>
                        </div>
    
                        <!-- Email -->
                        <div class="col-12 col-md-6">
                            <label for="email" class="form-label text-muted">Email</label>
                            <input type="email" class="form-control" id="email" [(ngModel)]="model.Email" name="Email"
                                #email="ngModel" required email placeholder="Enter email" />
                            <div *ngIf="form.submitted && email.invalid" class="text-danger mt-1">
                                <small *ngIf="email.errors?.['required']">{{requiredText}}.</small>
                                <small *ngIf="email.errors?.['email']">Please enter a valid email.</small>
                            </div>
                        </div>
    
                        <!-- Phone -->
                        <div class="col-12 col-md-6">
                            <label for="phone" class="form-label text-muted">Phone</label>
                            <input type="tel" class="form-control" id="phone" [(ngModel)]="model.Phone" name="Phone"
                                #phone="ngModel" required placeholder="Enter phone number" />
                            <div *ngIf="form.submitted && phone.invalid" class="text-danger mt-1">
                                <small *ngIf="phone.errors?.['required']">{{requiredText}}</small>
                            </div>
                        </div>
    
    
                        <!-- City -->
                        <div class="col-12 col-md-6">
                            <label for="citySelect" class="form-label">Select City</label>
                            <ng-select id="citySelect" [(ngModel)]="selectedCity" [items]="cityArray" bindLabel="name"
                                placeholder="Select a city" name="citySelect" class="dark-mode-select" [multiple]="false"
                                required>
                            </ng-select>
                            <div *ngIf="form.submitted && !selectedCity" class="text-danger mt-2">
                                {{requiredText}}
                            </div>
                        </div>
    
                        <!-- Zip -->
                        <div class="col-12 col-md-6">
                            <label for="zip" class="form-label text-muted">Zip</label>
                            <input type="text" class="form-control" required #zip="ngModel" id="zip" [(ngModel)]="model.Zip"
                                name="Zip" placeholder="Enter zip code" />
                            <div *ngIf="form.submitted && zip.invalid" class="text-danger mt-1">
                                <small *ngIf="zip.errors?.['required']">{{requiredText}}</small>
                            </div>
                        </div>
    
    
                        <div class="col-12 col-md-6">
                            <label for="timeZoneSelect" class="form-label">Select Timezone</label>
                            <ng-select id="timeZoneSelect" [(ngModel)]="selectedTimezone" [items]="timezoneArray"
                                (change)="onCountryChange()" bindLabel="name" placeholder="Select timeZone"
                                name="timeZoneSelect" class="dark-mode-select" [multiple]="false" required>
                            </ng-select>
                            <div *ngIf="form.submitted && !selectedTimezone" class="text-danger mt-2">
                                {{requiredText}}
                            </div>
                        </div>
    
                        <!-- Notes -->
                        <div class="col-12">
                            <label for="notes" class="form-label text-muted">Notes</label>
                            <textarea class="form-control" id="notes" [(ngModel)]="model.Notes" name="Notes"
                                placeholder="Enter notes" rows="3"></textarea>
                        </div>
    
    
                    </div>
    
    
    
                    <div class="rounded-3 mt-5 float-end">
                        <div class="card-body d-flex">
                            <button type="button" class="btn btn-secondary fw-semibold me-3 px-4 py-2"
                            data-bs-dismiss="modal">
                                Cancel
                            </button>
                            <button type="button" class="btn btn-warning fw-semibold me-3 px-4 py-2" (click)="onClear()">
                                Clear
                            </button>
                            <button *ngIf="mode === 'create'" type="submit" class="btn btn-primary fw-semibold px-4 py-2">
                                Save
                            </button>
                            <button *ngIf="mode === 'edit'" type="submit" class="btn btn-primary fw-semibold px-4 py-2">
                                Update
                            </button>
                        </div>
                    </div>
                </form>

            </div>
          </div>
        </div>
        <!-- <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Save changes</button>
                </div> -->
      </div>
  
    </div>
  </div>